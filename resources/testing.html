<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Test in the Sandbox | Dwolla API Documentation</title><meta name=description content="The Sandbox environment allows you to test the Dwolla API without any real-world impact, meaning that no real, personal identifying information or financial data is used."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.c861.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.d802.png><link rel=manifest href=/images/favicons/manifest.json><link rel=mask-icon href=/images/favicons/safari-pinned-tab.5f15.svg color=#ff7404><meta name=theme-color content=#ffffff><link rel=stylesheet href=/css/main.f9fa.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500%7CRoboto:300,400"><script src=/js/head-scripts.9520.js></script><script src=https://cdn.statuspage.io/se-v2.js></script><script>(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
      'gtm.start': new Date().getTime(),
      event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
      'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', 'GTM-WRT5LD6');</script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.dwolla.com class="logo icon-logo-dwolla-white">Dwolla</a><div class=hamburger><a href=https://accounts.dwolla.com/sign-up>Sign Up</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href=https://www.dwolla.com/platform>Product</a> <a href=https://www.dwolla.com/plans>Plans</a> <a href="/">Developers</a> <a href="https://www.dwolla.com/updates/">Resources</a> <a href="https://www.dwolla.com/about/">Company</a> <a href=https://accounts.dwolla.com/login>Login</a> <a class="btn primary" href=https://accounts.dwolla.com/sign-up>Sign Up</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/guides/">Guides</a> <a href="/resources/" class=active>Resources</a> <a href="https://docs.dwolla.com/">API docs</a> <a href="/integrations/">Partner Integrations</a> <a href=/pages/sdks.html class="no-nav js-two-col-no-toggle">Tools and SDKs</a><div class="custom-select custom-select--grey js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div><div style="float: right"><a href="https://discuss.dwolla.com/" target=_blank class="no-nav js-two-col-no-toggle"><span class=mobile-hide>Community</span> <span class=icon-nav-dev-community-grey>&ensp;&ensp;&ensp;</span></a></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--grey"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><h6>Choose a guide</h6><div class=picker id=js-sidenav-dropdown-button><button>Please select a guide</button><div class="icon icon-side-nav-collapse-plus"></div><div class="icon icon-side-nav-collapse-minus"></div></div><nav id=js-sidenav-dropdown-nav><a href="/guides/sandbox-setup/">Getting started in Sandbox</a> <a href="/guides/send-money/">Send money to your users</a> <a href="/guides/receive-money/">Receive money from your users</a> <a href="/guides/transfer-money-between-users/">Transfer money between two users</a> <a href="/guides/me-to-me/">Transfer money within a single user</a> <a href="/guides/auth/">Authorization</a> <a href="/guides/webhooks/">Webhooks</a></nav></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/send-money>Overview: Send money to your users</a><div class=dot></div></li><li><a href=/guides/send-money/onboarding.html>Customer onboarding</a><div class=dot></div></li><li><a href=/guides/send-money/add-funding-source.html>Add funding source</a><div class=dot></div></li><li><a href=/guides/send-money/retrieve-funding-sources.html>Retrieve funding sources</a><div class=dot></div></li><li><a href=/guides/send-money/create-transfer.html>Create a transfer</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/receive-money>Overview: Receive money from your users</a><div class=dot></div></li><li><a href=/guides/receive-money/onboarding.html>Customer onboarding</a><div class=dot></div></li><li><a href=/guides/receive-money/add-funding-source.html>Add funding source</a><div class=dot></div></li><li><a href=/guides/receive-money/retrieve-funding-sources.html>Retrieve funding sources</a><div class=dot></div></li><li><a href=/guides/receive-money/create-transfer.html>Create a transfer</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/transfer-money-between-users>Overview: transfer money between your users</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/obtain-access-token.html>Obtain an application access token</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-verified-customer.html>Create a Verified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/attach-unverified-bank.html>Attach an unverified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-unverified-customer.html>Create an Unverified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/attach-verified-bank.html>Attach a verified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/check-transfer.html>Check the status of your transfer</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/me-to-me>Overview: Me-to-Me</a><div class=dot></div></li><li><a href=/guides/me-to-me/onboarding.html>Customer onboarding</a><div class=dot></div></li><li><a href=/guides/me-to-me/add-funding-source.html>Add funding source</a><div class=dot></div></li><li><a href=/guides/me-to-me/retrieve-funding-sources.html>Retrieve funding sources</a><div class=dot></div></li><li><a href=/guides/me-to-me/create-transfer.html>Create a transfer</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/auth>Overview: Authorization</a><div class=dot></div></li><li><a href=/guides/auth/client-credentials-flow.html>Client credentials flow</a><div class=dot></div></li><li><a href=/guides/auth/using-an-access-token.html>Using an access token</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/webhooks>Overview: Webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/obtain-authorization.html>Obtain authorization</a><div class=dot></div></li><li><a href=/guides/webhooks/create-subscription.html>Create a webhook subscription</a><div class=dot></div></li><li><a href=/guides/webhooks/validating-webhooks.html>Validating webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/process-webhooks.html>Processing webhooks</a><div class=dot></div></li></ol></section></nav><nav class="side-nav js-side-nav active"><section><h6>Tools</h6><ul><li class=external-link><a href="https://dashboard-sandbox.dwolla.com/" target=_blank><span class=icon-sidenav-option>Sandbox Dashboard</span></a></li><li><a href=/resources/changelog.html>Change log</a></li><li class=external-link><a href="https://status.dwolla.com/" target=_blank><span class=icon-sidenav-option>Status</span></a></li></ul><h6>The API Basics</h6><ul><li><a href=/resources/account-types.html>Customer types</a><ul></ul></li><li><a href=/resources/balance-funding-source.html>Balance Funding Source</a><ul></ul></li><li><a href=/resources/bank-transfer-workflow.html>Bank transfer workflow</a><ul><li><a href=/resources/bank-transfer-workflow/processing-times.html>Processing times</a></li><li><a href=/resources/bank-transfer-workflow/transfer-failures.html>Transfer failures</a></li></ul></li><li><a href=/resources/business-verified-customer.html>Business verified customer</a><ul><li><a href=/resources/business-verified-customer/create-business-verified-customers.html>Creating business verified customers</a></li><li><a href=/resources/business-verified-customer/handling-controller-and-customer-statuses.html>Handling business verified customer statuses</a></li><li><a href=/resources/business-verified-customer/adding-beneficial-owners.html>Adding beneficial owners</a></li><li><a href=/resources/business-verified-customer/handling-beneficial-owner-certification.html>Certifying beneficial ownership</a></li><li><a href=/resources/business-verified-customer/frequently-asked-questions.html>Frequently Asked Questions</a></li></ul></li><li><a href=/resources/funding-source-verification.html>Funding source verification</a><ul><li><a href=/resources/funding-source-verification/micro-deposit-verification.html>Micro-deposit verification</a></li><li><a href=/resources/funding-source-verification/instant-account-verification.html>Instant account verification</a></li></ul></li><li><a href=/resources/personal-verified-customer.html>Personal verified customer</a><ul><li><a href=/resources/personal-verified-customer/create-personal-verified-customers.html>Creating a personal verified customer</a></li><li><a href=/resources/personal-verified-customer/handling-verification-statuses-personal.html>Handling personal verified customer statuses</a></li><li><a href=/resources/personal-verified-customer/frequently-asked-questions.html>Frequently Asked Questions</a></li></ul></li><li><a href=/resources/testing.html class=active>Test in the Sandbox</a><ul></ul></li><li><a href=/resources/webhook-events.html>Webhook Events</a><ul></ul></li></ul><h6>Features</h6><ul><li><a href=/resources/dwolla-js.html>Dwolla.js</a><ul><li><a href=/resources/dwolla-js/add-a-bank-account.html>Add a Bank Account</a></li><li><a href=/resources/dwolla-js/instant-account-verification.html>Add + Verify a Bank Account (IAV)</a></li><li><a href=/resources/dwolla-js/on-demand-bank-transfers.html>On-demand bank transfers</a></li></ul></li><li><a href=/resources/facilitator-fee.html>Facilitator fee</a><ul></ul></li><li><a href=/resources/operational-notifications.html>Operational Notifications</a><ul></ul></li><li><a href=/resources/same-day-ach.html>Same Day ACH</a><ul></ul></li></ul><h6>Integrations</h6><ul><li><a href=/resources/dwolla-plaid-integration.html>Dwolla + Plaid</a><ul></ul></li><li><a href=/resources/dwolla-sift-integration.html>Dwolla + Sift</a><ul></ul></li><a href="https://www.dwolla.com/partnerships/">Partner Ecosystem</a></ul></section></nav><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><ul><li><a href=https://docs.dwolla.com/#introduction>Introduction</a></li><li><a href=https://docs.dwolla.com/#oauth>OAuth</a></li><li><a href=https://docs.dwolla.com/#customers>Customers</a></li><li><a href=https://docs.dwolla.com/#documents>Documents</a></li><li><a href=https://docs.dwolla.com/#funding-sources>Funding Sources</a></li><li><a href=https://docs.dwolla.com/#transfers>Transfers</a></li><li><a href=https://docs.dwolla.com/#events>Events</a></li><li><a href=https://docs.dwolla.com/#webhook-subscriptions>Webhook Subscriptions</a></li><li><a href=https://docs.dwolla.com/#webhooks>Webhooks</a></li></ul></section></nav><nav class="side-nav js-side-nav"><section><h6>Integrations</h6><ul><li><a href=/integrations/authorization.html>Integration Authorization</a></li><li class=external-link><a href="https://www.dwolla.com/partnerships/" target=_blank><span class=icon-sidenav-option>Partner Ecosystem</span></a></li></ul></section></nav></section><section class=cnt-two-col__content><h1 id=testing-in-the-sandbox>Testing in the Sandbox</h1><h2 id=overview>Overview</h2><p>The Sandbox environment allows you to test the Dwolla API without any real-world impact, meaning that no real, personal identifying information or financial data is used and bank transfer processing does not run as it would in Production. Since dummy data is utilized in the Sandbox environment, Dwolla provides a way to simulate various test cases by providing either sentinel values that can be used when making API requests or buttons that trigger certain actions (e.g. simulate bank transfer processing).</p><ol class=alerts><li class="alert icon-alert-info">If you are new to application development with Dwolla, we recommend you review our <a href=/guides/sandbox-setup>Sandbox Setup Guide</a>.</li></ol><hr><h1 id=testing-customers>Testing Customers</h1><h3 id=manage-customers>Manage Customers</h3><p>The <a href=https://dashboard-sandbox.dwolla.com>Sandbox Dashboard</a> allows you to manage Customers, as well as transfers associated with the Customers that belong to your Sandbox account. Once your application has <a href=https://docs.dwolla.com/#create-a-customer>created its Customers</a>, you can access the <a href=https://dashboard-sandbox.dwolla.com>Sandbox Dashboard</a> to validate that the request was recorded properly in our test environment.</p><h4 id=verified-customers><code>Verified Customers</code></h4><h5 id=simulate-identity-verification-statuses><strong>Simulate identity verification statuses</strong></h5><p>There are various reasons a Verified Customer may have a status other than <code>verified</code> after the initial Customer creation. You will want your app to be prepared to handle these alternative statuses.</p><p>In production, Dwolla will place the Verified Customer in either the <code>retry</code>, <code>kba</code>, <code>document</code>, <code>verified</code>, or <code>suspended</code> state of verification after an initial identity verification check.</p><p><strong>For personal verified Customers</strong>, reference the resource article on <a href=https://developers.dwolla.com/resources/personal-verified-customer/handling-verification-statuses-personal.html>customer verification</a> for more information on handling identity verification for Verified Customers. To simulate the various statuses in the Sandbox, submit either <code>verified</code>, <code>retry</code>, <code>kba</code>, <code>document</code>, or <code>suspended</code> in the <strong>firstName</strong> parameter in order to <a href=https://docs.dwolla.com/#request-parameters---verified-customer>create a new Verified Customer</a> with that status.</p><p><strong>For business verified Customers</strong>, reference the resource article on <a href=https://developers.dwolla.com/resources/business-verified-customer/create-business-verified-customers.html>customer verification</a> article that goes over information on properly verifying your Controllers and Beneficial Owners. To simulate the various statuses in the Sandbox, submit either <code>verified</code>, <code>retry</code>, <code>document</code>, or <code>suspended</code> in the <strong>controller firstName</strong> parameter in order to <a href=https://docs.dwolla.com/#request-parameters---verified-customer>create a new Verified Customer</a> with that status.</p><h5 id=simulate-kba-verified-and-failed-events><strong>Simulate KBA verified and failed events</strong></h5><p>If a Personal Verified Customer isn’t systematically identity-verified after their second attempt to retry their information, the Customer may be placed in a <code>kba</code> status and will be required to successfully answer at least three out of four knowledge based authentication(KBA) questions in order to pass verification.</p><p>To simulate the <code>customer_kba_verification_passed</code> event as the result of KBA success in Sandbox, answer all four questions with either “None of the above” or “I have never been associated with this vehicle”. As a result, the Customer will be placed in a verified status and the <code>customer_verified</code> event is triggered.</p><p>To simulate the <code>customer_kba_verification_failed</code> event as the result of KBA failure in Sandbox, answer the questions with any answer choices other than “None of the above” or “I have never been associated with this vehicle”. As a result, the Customer will be placed in a document status and the <code>customer_verification_document_needed</code> event is triggered.</p><h5 id=simulate-document-upload-approved-and-failed-events><strong>Simulate document upload approved and failed events</strong></h5><p>If a Verified Customer isn&rsquo;t systematically identity-verified, the Customer may be placed in a <code>document</code> status and will require an identifying document to be uploaded and reviewed. Reference the <a href=https://developers.dwolla.com/resources/customer-verification.html>customer verification</a> resource article for acceptable forms of identifying documents for <code>Verified Customers</code>.</p><p>Since the document review process requires interaction from Dwolla, sample test documents can be uploaded in the Sandbox environment to simulate the <code>customer_verification_document_approved</code> and <code>customer_verification_document_failed</code> events. Right click on an image below and select “Save image as&hellip;”. <strong>Note:</strong> When saving an image, make sure to keep the size, format, and name of the image the same.</p><h5 id=sample-document-approved-image><strong>Sample document approved image</strong></h5><p><img src=https://cdn.dwolla.com/images/sandbox-test-images/test-document-upload-success.png alt="Image of document approved" title="document success image"></p><h5 id=sample-document-failed-image><strong>Sample document failed image</strong></h5><p><img src=https://cdn.dwolla.com/images/sandbox-test-images/test-document-upload-fail.png alt="Image of document failed" title="document failed image"></p><hr><h1 id=testing-funding-sources>Testing Funding Sources</h1><h3 id=test-bank-account-numbers>Test bank account numbers</h3><p>Dwolla requires a valid U.S. routing number and a random account number between 4-17 digits to add a bank account. For testing purposes, you can use the routing number <code>222222226</code> or refer to the list of routing numbers from the <a href=https://www.frbservices.org/EPaymentsDirectory/agreement.html>Federal Reserve Bank Services</a> website.</p><h2 id=simulate-iav-success-and-error-scenarios-in-sandbox>Simulate IAV success and error scenarios in Sandbox</h2><p>Dwolla&rsquo;s Sandbox environment uses a <a href="https://www.google.com/url?q=https://www.dwolla.com/updates/fake-it-as-you-make-it-why-fake-services-are-awesome-for-developers/">fake service</a> which allows you to simulate the end-user experience for adding and verifying a bank account within the IAV flow. The default &ldquo;success&rdquo; scenario is a happy path flow that includes: a single set of MFA questions, presentation of two valid accounts and one account without a routing number. Any text can be entered in the input fields to allow you to proceed through the IAV flow.</p><p>To help you test error scenarios, a flag and an option can be used in the first field (usually username or ID) for the bank you are trying to authenticate. The remaining input fields in the flow can be any string of text, as we allow you to proceed through the flow regardless of the information entered. Use the following flag and option values to test various error scenarios:</p><table><thead><tr><th>Flag</th><th>Option</th><th>User-facing message</th></tr></thead><tbody><tr><td>-e</td><td>InvalidLogin</td><td>Please make sure your login or security information is correct.</td></tr><tr><td>-e</td><td>AccountNotFound</td><td>Sorry, we’re unable to find your {BANK NAME} account. Please try again or use a different account.</td></tr><tr><td>-e</td><td>UnsupportedSite</td><td>Sorry, that financial institution is not supported. If possible, please choose a different one or an alternative method for connecting your financial institution.</td></tr><tr><td>-e</td><td>AlreadyLoggedIn</td><td>If you&rsquo;re currently logged in to your {BANK NAME} account, please log out and try again.</td></tr><tr><td>-e</td><td>VisitSite</td><td>We’re unable to process your information because the {BANK NAME} site is currently requiring additional action from you. Please resolve this, then try again.</td></tr><tr><td>-e</td><td>UnavailableSite</td><td>Sorry, there seem to be some technical difficulties while attempting to process your information. Please try again later.</td></tr></tbody></table><h5 id=example-iav-error-scenario>Example IAV error scenario</h5><p><img src=/images/IAVErrorMessage.c00b.png alt="Screenshot of IAV user facing error message" title="IAV user facing error"></p><h3 id=test-micro-deposit-verification>Test micro-deposit verification</h3><p>If your application leverages the micro-deposit method of bank verification, Dwolla will transfer two deposits of less than $0.10 to your customer&rsquo;s linked bank or credit union account after calling the API to initiate micro-deposits. Since the Sandbox environment doesn&rsquo;t replicate any bank transfer processes, any two amounts <strong>below</strong> $<code>0.10</code> will allow you to verify the funding source immediately.</p><h3 id=test-micro-deposit-failed-verification-attempts>Test micro-deposit failed verification attempts</h3><p>When verifying a funding source using the micro-deposit method of bank verification, users are allowed <strong>three attempts</strong> to correctly input the two posted micro-deposit amounts. If the user fails to verify the two posted amounts on the third attempt, an event will be triggered and the funding source will not be verified using those micro-deposit amounts. To simulate the <code>microdeposits_maxattempts</code> or <code>customer_microdeposits_maxattempts</code> events in the Sandbox, use the amounts <code>0.09</code> and <code>0.09</code> when calling the API to verify micro-deposits. Reference the <a href=https://developers.dwolla.com/resources/funding-source-verification/micro-deposit-verification.html>micro-deposit verification resource article</a> for more information on handling failed verification attempts.</p><hr><h1 id=testing-transfers>Testing Transfers</h1><p>The Sandbox environment does not replicate any bank transfer processes, so a pending transfer will not clear or fail automatically after a few business days as it would in production. The transfer will simply remain in the pending state indefinitely.</p><h3 id=simulate-bank-transfer-processing>Simulate bank transfer processing</h3><p>There are two options available for processing or failing bank transfers in the Sandbox environment.</p><ul><li><strong>Option 1:</strong> your application will call the &ldquo;sandbox-simulations&rdquo; endpoint (referenced below) which will process or fail the last 500 bank transfers that occurred on the authorized application or Sandbox account.</li><li><strong>Option 2:</strong> you&rsquo;ll use the &ldquo;Process bank transfers button&rdquo; in the Sandbox Dashboard, which will process or fail the last 500 bank transfers that occurred on your Sandbox account or any API <code>Customers</code> you manage.</li></ul><h5 id=sandbox-simulations-request-and-response>Sandbox simulations request and response</h5><div class="code-snippet js-code-snippet language-nohide"><button class="btn alternative">copy</button><div class="code-snippet__cnt highlight"><pre><code class=language-nohide data-lang=nohide>POST https://api-sandbox.dwolla.com/sandbox-simulations
Accept: application/vnd.dwolla.v1.hal+json
Content-Type: application/vnd.dwolla.v1.hal+json
Authorization: Bearer {Your access token}

...

{
  "_links": {
    "self": {
      "href": "https://api-sandbox.dwolla.com/sandbox-simulations",
      "type": "application/vnd.dwolla.v1.hal+json",
      "resource-type": "sandbox-simulation"
    }
  },
  "total": 8
}
</code></pre></div></div><p><strong>Note:</strong> If a bank-to-bank transaction is initiated between two users, you&rsquo;ll want to simulate bank transfer processing twice in order to process both sides of the transaction (debit and credit). Processing for bank transfers will also include initiated micro-deposits. If your application is <a href=https://docs.dwolla.com/#webhook-subscriptions>subscribed to webhooks</a>, notifications will be sent, including all transfer or micro-deposit related events, letting your application know that transfers have processed or failed.</p><h5 id=process-bank-transfers-button><strong>Process bank transfers button</strong></h5><p>A “Process bank transfers” button is available in the Sandbox <a href=https://dashboard-sandbox.dwolla.com>Dwolla Dashboard and Admin</a>. This button performs the same function as the &ldquo;sandbox-simulations&rdquo; endpoint (mentioned above) and allows you to simulate bank transfer processing in the Sandbox. Once the button is clicked, Dwolla will process or fail (see below for how-to trigger ACH failures) the last 500 bank transfers that occurred on your Sandbox account or the API Customer accounts you manage.</p><p><img src=/images/process-bank-transfers.c6a8.png alt="Screenshot of process bank transfers button" title="Process bank transfers button"></p><h3 id=test-bank-transfer-failures>Test bank transfer failures</h3><p>Transfers to or from a bank account can fail for a number of reasons (e.g. insufficient funds, invalid account number, etc. ). When a bank transfer fails, the associated financial institution that rejected the transaction assigns an ACH return code and a transfer failure event is then triggered in Dwolla. Dwolla allows you to trigger various bank transfer failures by specifying an “R” code in the funding source <code>name</code> parameter when creating or <a href=https://docs.dwolla.com/#update-a-funding-source>updating a funding source</a> for a Dwolla Account or API Customer. When a <a href=https://docs.dwolla.com/#initiate-a-transfer>transfer is initiated</a> using a funding source that has an “R” code assigned to its name, a transfer failure event will trigger and the status will update to failed when you simulate bank transfer processing (as mentioned above).</p><p>Dwolla allows you to pass in a few different sentinel values that are used to test different bank transfer failure scenarios. The list of available sentinel values cover the most common uses cases where ACH return codes can be triggered in production. Reference the list of codes in the following table:</p><table><thead><tr><th>Return code</th><th>Description</th></tr></thead><tbody><tr><td>R01</td><td>Insufficient Funds: This value is used to simulate funds failing from the source bank account (ACH debit).</td></tr><tr><td>R03</td><td>No Account/Unable to Locate Account: This value is primarily used to simulate funds failing to the destination bank account (ACH credit). The funding source will be automatically removed from Dwolla when this return code is triggered.</td></tr><tr><td>R01-late</td><td>This value is used to simulate funds failing from the source bank account post-settlement. Note: You must click “Process bank transfers” twice in order to test this scenario.</td></tr><tr><td>R03-late</td><td>This value is primarily used to simulate funds failing to the destination bank post-settlement. The funding source will be automatically removed from Dwolla when this return code is triggered. Note: You must click “Process bank transfers” twice in order to test this scenario.</td></tr></tbody></table><p>For more information on bank transfer failures, and a list of common return codes and actions, refer to our <a href=https://developers.dwolla.com/resources/bank-transfer-workflow/transfer-failures.html>developer resource article</a>.</p><h5 id=example-of-using-a-sentinel-value-for-testing-bank-transfer-failures>Example of using a sentinel value for testing bank transfer failures</h5><p>This example assumes that a funding source has already been attached to an account. Once the funding source <code>name</code> has been updated to reflect the ACH failure scenario you want to test, then you can <a href=https://docs.dwolla.com/#initiate-a-transfer>initiate a transfer</a> to or from that funding source via the API.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST https://api-sandbox.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c
Accept: application/vnd.dwolla.v1.hal+json
Content-Type: application/vnd.dwolla.v1.hal+json
Authorization: Bearer pBA9fVDBEyYZCEsLf/wKehyh1RTpzjUj5KzIRfDi0wKTii7DqY

...

{
  "name": "R03"
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s1>'https://api-sandbox.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span>
<span class=n>request_body</span> <span class=o>=</span> <span class=p>{</span>
      <span class=s2>"name"</span> <span class=o>=&gt;</span> <span class=s2>"R03"</span><span class=p>,</span>
<span class=p>}</span>

<span class=c1># Using DwollaV2 - https://github.com/Dwolla/dwolla-v2-ruby (Recommended)</span>
<span class=n>funding_source</span> <span class=o>=</span> <span class=n>app_token</span><span class=p>.</span><span class=nf>post</span> <span class=s2>"</span><span class=si>#{</span><span class=n>funding_source_url</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=n>request_body</span>
<span class=n>funding_source</span><span class=p>.</span><span class=nf>name</span> <span class=c1># =&gt; "R03"</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>/**
 *  No example for this language yet. Coming soon.
 **/
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s>'https://api-sandbox.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span>
<span class=n>request_body</span> <span class=o>=</span> <span class=p>{</span>
  <span class=s>'name'</span><span class=p>:</span> <span class=s>'R03'</span>
<span class=p>}</span>

<span class=c># Using dwollav2 - https://github.com/Dwolla/dwolla-v2-python (Recommended)</span>
<span class=n>funding_source</span> <span class=o>=</span> <span class=n>app_token</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>,</span> <span class=n>request_body</span><span class=p>)</span>
<span class=n>funding_source</span><span class=o>.</span><span class=n>body</span><span class=p>[</span><span class=s>'name'</span><span class=p>]</span> <span class=c># =&gt; 'R03'</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>fundingSourceUrl</span> <span class=o>=</span> <span class=s1>'https://api-sandbox.dwolla.com/funding-sources/692486f8-29f6-4516-a6a5-c69fd2ce854c'</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>requestBody</span> <span class=o>=</span> <span class=p>{</span>
  <span class=na>name</span><span class=p>:</span> <span class=s2>"R03"</span>
<span class=p>};</span>

<span class=nx>appToken</span>
  <span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=nx>fundingSourceUrl</span><span class=p>,</span> <span class=nx>requestBody</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>res</span> <span class=o>=&gt;</span> <span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// =&gt; "R03"</span>
</code></pre></div></div><hr><!-- there is also a icon of icon-status-down --><section class=status><h5>Status</h5><a href="https://status.dwolla.com/"><span class=dwolla-sp-status><span class=icon-status-operational></span> Production: Operational</span></a></section><hr><footer><div class=page-wrap><nav><h6>Product</h6><a href=https://www.dwolla.com/platform>Platform</a> <a href=https://www.dwolla.com/plans>Plans</a> <a href=https://www.dwolla.com/security>Security</a> <a href=https://www.dwolla.com/integrations>Integrations</a></nav><nav><h6>Resources</h6><a href=https://www.dwolla.com/updates>Blog</a> <a href=https://www.dwolla.com/case-studies>Case Studies</a> <a href=https://developers.dwolla.com>Developers</a> <a href="https://help.dwolla.com/">Help Center</a></nav><nav><h6>Company</h6><a href=https://www.dwolla.com/about>About Us</a> <a href=https://www.dwolla.com/careers>Careers</a> <a href=https://www.dwolla.com/press>Press</a> <a href="https://www.dwolla.com/contact/">Contact Us</a></nav><nav><h6>Legal</h6><a href="https://www.dwolla.com/legal/tos/">Terms of Service</a> <a href="https://www.dwolla.com/legal/privacy/">Privacy Policy</a></nav></div></footer><section class=disclaimer><div class=page-wrap><h5>Financial institutions play an important role in the Dwolla network.</h5><p>Dwolla, Inc. is an agent of Veridian Credit Union and all funds associated with your account in our network are held in one or more pooled accounts at Veridian Credit Union. These funds may not be eligible for share insurance by the National Credit Union Share Insurance Fund. Dwolla, Inc. is the operator of a software platform that communicates user instructions for funds transfers to Veridian Credit Union.</p></div></section><section class=copyright><div class=page-wrap><div><span>&copy; 2020 Dwolla, Inc.</span> <a href="https://www.dwolla.com/legal/about-our-financial-institution-partner/">Dwolla, Inc. is an agent of its Financial Institution Partner(s)</a></div></div></section></section></div></div></div><script src=https://cdn.dwolla.com/cookie-consent/dwolla-consent.js></script><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.3/iframeResizer.min.js></script><script type=text/javascript>// Create browser compatible event handler.
  var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
  var eventer = window[eventMethod];
  var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
  // Listen for a message from the iframe.
  eventer(messageEvent, function(e) {
    if (isNaN(e.data)) return;

    // replace #sizetracker with what ever what ever iframe id you need
    document.getElementById('sizetracker').style.height = e.data + 'px';

  }, false);</script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.5c79.js></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-30404064-1');ga('send','pageview');</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRT5LD6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript></body></html>